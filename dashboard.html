<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Autocom â€¢ Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css" />
    <style>
        /* Dashboard-spezifische Erweiterungen */
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            padding: 20px;
            flex: 1;
            overflow: hidden;
        }
        
        .card {
            background: rgba(0, 255, 234, 0.05);
            border: 1px solid #00ffea;
            border-radius: 8px;
            padding: 18px;
            box-shadow: 0 0 15px rgba(0, 255, 234, 0.2);
            backdrop-filter: blur(4px);
            position: relative;
            overflow: hidden;
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(0, 255, 234, 0.03) 100%);
            pointer-events: none;
        }
        
        .card h3 {
            color: #00ffea;
            margin-bottom: 12px;
            font-size: 1.1rem;
            text-shadow: 0 0 8px #00ffea;
            letter-spacing: 1px;
        }
        
        .big-value {
            font-size: 2.2rem;
            font-weight: 800;
            color: #00ffaa;
            text-shadow: 0 0 15px #00ffaa;
        }
        
        .small {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .moon-big {
            font-size: 4rem;
            display: block;
            text-align: center;
            margin: 10px 0;
        }
        
        .portal-yes {
            color: #ff00aa;
            animation: pulse 2s infinite;
        }
    </style>
</head>

<body>

    <!-- CRT Effekte (wie im Terminal) -->
    <div class="crt-overlay"></div>
    <div class="scanlines"></div>

    <div class="terminal-container">
        <!-- Header -->
        <header class="terminal-header">
            <h1>
                <span class="glow">Autocom</span>
                <span class="beta-bubble">beta</span>
            </h1>
            <nav class="nav">
                <a href="index.html">start</a> â€¢
                <a href="index.html">terminal</a> â€¢
                <a href="dashboard.html" class="active">dashboard</a>
            </nav>
        </header>

        <!-- Dashboard Grid -->
        <div class="dashboard-grid">

            <!-- System Info -->
            <div class="card">
                <h3>System Status</h3>
                <div class="big-value">ONLINE</div>
                <div class="small">Autocom Terminal v1.0</div>
                <div class="small">Lokal â€¢ Keine Cloud â€¢ 100% Privat</div>
            </div>

            <!-- Uhrzeit & Datum -->
            <div class="card">
                <h3>Lokale Zeit â€¢ Seesen</h3>
                <div id="clock" class="big-value">00:00:00</div>
                <div id="date" class="small"></div>
            </div>

            <!-- Mondphase -->
            <div class="card">
                <h3>Mondphase heute</h3>
                <div id="moon-emoji" class="moon-big">ðŸŒ‘</div>
                <div id="moon-text" style="text-align:center">Neumond</div>
            </div>

            <!-- Portaltag -->
            <div class="card">
                <h3>Maya Portaltag</h3>
                <div id="portal-status" class="big-value">Lade...</div>
            </div>

            <!-- Wetter Seesen -->
            <div class="card">
                <h3>Wetter â€¢ Seesen</h3>
                <div id="weather" class="big-value">Lade...</div>
            </div>

            <!-- Sonnenzeiten -->
            <div class="card">
                <h3>Sonne heute</h3>
                <div id="sunrise">Sonnenaufgang: --:--</div>
                <div id="sunset">Sonnenuntergang: --:--</div>
            </div>

            <!-- Notizen Counter -->
            <div class="card">
                <h3>Gespeicherte Notizen</h3>
                <div id="notes-count" class="big-value">0</div>
                <div class="small">im LocalStorage</div>
            </div>

            <!-- Easteregg Hint -->
            <div class="card">
                <h3>Geheimes Easteregg</h3>
                <div class="small">Tipp im Terminal:</div>
                <div style="color:#ff00aa; margin-top:8px;">/rune hello world</div>
            </div>

        </div>

        <!-- Footer -->
        <footer class="terminal-footer">
            2025 Terminal Projekt von Benjamin Koch â€¢ <a href="https://www.benjaminkoch.de" target="_blank">www.benjaminkoch.de</a>
        </footer>
    </div>

    <script>
        // Live-Uhr
        function updateClock() {
            const now = new Date();
            document.getElementById('clock').textContent = now.toLocaleTimeString('de-DE', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('date').textContent = now.toLocaleDateString('de-DE', {
                weekday: 'long',
                day: 'numeric',
                month: 'long',
                year: 'numeric'
            });
        }
        setInterval(updateClock, 1000);
        updateClock();

        // Notizen zÃ¤hlen
        const notes = JSON.parse(localStorage.getItem('notes') || '[]');
        document.getElementById('notes-count').textContent = notes.length;

        // Mondphase (gleiche Logik wie im Terminal)
        const phases = ['ðŸŒ‘ Neumond', 'ðŸŒ’ Zunehmender Mond', 'ðŸŒ“ Erstes Viertel', 'ðŸŒ” Zunehmender Mond', 'ðŸŒ• Vollmond', 'ðŸŒ– Abnehmender Mond', 'ðŸŒ— Letztes Viertel', 'ðŸŒ˜ Abnehmender Mond'];
        const now = new Date();
        const daysSinceNew = (Date.UTC(now.getFullYear(), now.getMonth(), now.getDate()) - Date.UTC(2000, 0, 6)) / 86400000 % 29.530588853;
        const phaseIndex = Math.floor((daysSinceNew + 2) / 29.530588853 * 8) % 8;
        document.getElementById('moon-emoji').textContent = phases[phaseIndex].split(' ')[0];
        document.getElementById('moon-text').textContent = phases[phaseIndex].split(' ')[1] + ' ' + phases[phaseIndex].split(' ')[2] || '';
        // ================ LOKALE PORTALTAGE DATENBANK (2025 + 2026 + 2027) ================
        const portalDays = {
            2025: ["2025-01-01", "2025-01-02", "2025-01-11", "2025-01-12", "2025-01-29", "2025-01-30",
                "2025-02-08", "2025-02-09", "2025-02-26", "2025-02-27",
                "2025-03-19", "2025-03-20", "2025-03-21", "2025-04-07", "2025-04-08", "2025-04-27", "2025-04-28",
                "2025-05-16", "2025-05-17", "2025-06-05", "2025-06-06", "2025-06-24", "2025-06-25",
                "2025-07-15", "2025-07-16", "2025-08-03", "2025-08-04", "2025-08-23", "2025-08-24",
                "2025-09-11", "2025-09-12", "2025-10-01", "2025-10-02", "2025-10-21", "2025-10-22", "2025-10-31",
                "2025-11-01", "2025-11-19", "2025-11-20", "2025-12-10", "2025-12-11", "2025-12-30", "2025-12-31"
            ],
            2026: ["2026-01-17", "2026-01-18", "2026-01-19", "2026-01-20", "2026-01-21", "2026-01-28", "2026-01-29",
                    "2026-02-05", "2026-02-06", "2026-02-11", "2026-02-16", "2026-02-17", "2026-02-19", "2026-02-20", "2026-02-24", "2026-02-25",
                    "2026-03-04", "2026-03-05", "2026-03-07", "2026-03-08", "2026-03-12", "2026-03-13", "2026-03-15", "2026-03-25", "2026-03-26", "2026-03-27", "2026-03-28", "2026-03-29", "2026-03-30", "2026-03-31",
                    "2026-04-01", "2026-04-02", "2026-04-03", "2026-05-04", "2026-05-05", "2026-05-06", "2026-05-07", "2026-05-08", "2026-05-09", "2026-05-10", "2026-05-11", "2026-05-12", "2026-05-13", "2026-05-23", "2026-05-24", "2026-05-26", "2026-05-27", "2026-05-31",
                    "2026-06-01", "2026-06-03", "2026-06-04", "2026-06-11", "2026-06-12", "2026-06-16", "2026-06-17", "2026-06-19", "2026-06-20", "2026-06-24", "2026-06-25", "2026-06-30",
                    "2026-07-01", "2026-07-07", "2026-07-08", "2026-07-15", "2026-07-16", "2026-07-19", "2026-07-20",
                    "2026-08-05", "2026-08-06", "2026-08-07", "2026-08-26", "2026-08-27",
                    "2026-09-15", "2026-09-16", "2026-09-17",
                    "2026-10-04", "2026-10-05", "2026-10-08", "2026-10-09", "2026-10-15", "2026-10-16", "2026-10-23", "2026-10-24", "2026-10-29", "2026-10-30",
                    "2026-11-03", "2026-11-04", "2026-11-06", "2026-11-07", "2026-11-11", "2026-11-12", "2026-11-19", "2026-11-20", "2026-11-22", "2026-11-23", "2026-11-27", "2026-11-28", "2026-11-30",
                    "2026-12-01", "2026-12-10", "2026-12-11", "2026-12-12", "2026-12-13", "2026-12-14", "2026-12-15", "2026-12-16", "2026-12-17", "2026-12-18", "2026-12-19"
                ]
                // 2027 und weitere Jahre kannst du spÃ¤ter einfach dranhÃ¤ngen
        };

        // PrÃ¼ft, ob heute Portaltag ist
        function isPortalDay() {
            const today = new Date().toISOString().slice(0, 10);
            const year = new Date().getFullYear();
            if (portalDays[year] && portalDays[year].includes(today)) {
                return true;
            }
            // Fallback: wenn Jahr nicht vorhanden â†’ versuchen von extern zu laden (alte Methode)
            return null;
        }

        // Dashboard: Portaltag anzeigen
        const portalStatusEl = document.getElementById('portal-status');
        const portalResult = isPortalDay();
        if (portalResult === true) {
            portalStatusEl.innerHTML = '<span class="portal-yes">JA! PORTALTAG!</span><br><span class="small">Energien sind hoch!</span>';
        } else if (portalResult === false) {
            portalStatusEl.innerHTML = 'Nein<br><span class="small">heute nicht</span>';
        } else {
            portalStatusEl.textContent = 'Lade...';
            // Fallback externe Abfrage (nur wenn Jahr nicht lokal vorhanden)
            fetch(`https://raw.githubusercontent.com/mayakalender/portaltage/main/${new Date().getFullYear()}.json`)
                .then(r => r.json()).then(d => {
                    const today = new Date().toISOString().slice(0, 10);
                    portalStatusEl.innerHTML = d.includes(today) ?
                        '<span class="portal-yes">JA! PORTALTAG!</span>' :
                        'Nein<br><span class="small">heute nicht</span>';
                });
        }

        // === Die anderen Dashboard-Funktionen bleiben genau gleich wie vorher ===
        const notes = JSON.parse(localStorage.getItem('notes') || '[]');
        document.getElementById('notes-count').textContent = notes.length;

        // Live-Uhr
        function updateClock() {
            const now = new Date();
            document.getElementById('clock').textContent = now.toLocaleTimeString('de-DE', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('date').textContent = now.toLocaleDateString('de-DE', {
                weekday: 'long',
                day: 'numeric',
                month: 'long',
                year: 'numeric'
            });
        }
        setInterval(updateClock, 1000);
        updateClock();

        // Wetter Seesen
        fetch('https://wttr.in/Seesen?format=%c+%t+%w')
            .then(r => r.text())
            .then(text => {
                document.getElementById('weather').textContent = text.trim() || 'keine Daten';
            });

        // Sonnenzeiten
        fetch('https://api.sunrise-sunset.org/json?lat=51.89&lng=10.18&formatted=0')
            .then(r => r.json())
            .then(d => {
                const rise = new Date(d.results.sunrise).toLocaleTimeString('de-DE', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
                const set = new Date(d.results.sunset).toLocaleTimeString('de-DE', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
                document.getElementById('sunrise').innerHTML = `â†‘ ${rise} Uhr`;
                document.getElementById('sunset').innerHTML = `â†“ ${set} Uhr`;
            });
    </script>
</body>

</html>